<!DOCTYPE html>

{% extends 'base.html' %}
{% load crispy_forms_tags %}

{% block content %}
    {{ form.media }}

    <div class="row no-top-margin">

        <div class="post-edit col-sm-12 flex-column">

            <div class="post-edit edit-form-container">

                <form method="POST" class="post-edit form-content">{% csrf_token %}

                    <div class="add-new-post-button">
                    <div class="profile-page-link-container">
                        <div class="nav-link">
                            {% if user.profile.avatar %}
                                <img src="{{ user.profile.avatar.url }}"
                                     alt="Profile Avatar"
                                     class="nav-avatar 30x30 img-responsive">
                            {% else %}
                                <img src="/static/crazycat.jpeg"
                                     alt="Profile Avatar"
                                     class="nav-avatar 30x30 img-responsive">
                            {% endif %}
                            <span class="add-new-post-button-text"> Edit your post<i class="fas fa-feather-alt"></i></span>
                        </div>
                    </div>
                </div>

                    <div class="post-edit-card">

                        <div class="fieldWrapper title">
                            {{ form.title }}
                        </div>
                        <div class="fieldWrapper content">
                            {{ form.content }}
                        </div>

                    </div>

                    <div class="fieldWrapper form-title">
                            <h3>POST DETAILS</h3>
                    </div>

                    <div class="post-detail-card">

                        <div class="fieldWrapper privacy">
                            <label for="{{ form.privacy.id_for_label }}">Change privacy:</label>
                            {{ form.privacy }}
                        </div>

                        {{ formset.management_form }}
                        <label for="{{ form.tag.id_for_label }}">Update current tags:</label>

                        <div class="current-post-tags">
                            <ul class="edit-current-tags">
                                {% for tag in post.tags.all %}
                                    <li class="edit-single-tag">
                                        <a class="btn btn-light tag" href="">{{ tag.slug }}</a>
                                    </li>
                                {% endfor %}
                            </ul>
                        </div>

                        <div class="fieldWrapper tag">
                            <label for="{{ form.tag.id_for_label }}">Add new tags:</label>

                            {% for form in formset %}
                                {{ form }}
                            {% endfor %}
                        </div>
                    </div>

                    <div class="buttons">
                        <input type="submit" value="SAVE CHANGES" class="btn btn-success">
                        <a href="{% url 'website:posts_list' %}" class="btn btn-secondary">CANCEL</a>
                    </div>
                </form>
            </div>
        </div>
    </div>

{% endblock %}