<!DOCTYPE html>

{% extends 'base.html' %}
{% load crispy_forms_tags %}

{% block content %}

    <div class="row">

        <div class="col-lg-8 col-md-10 mx-auto">

        {% if user.is_authenticated and request.user == post.author %}

        <form class="buttons">
            {%  if post.status == "Draft" %}

                <a class="btn btn-default" href="{% url 'website:post_edit' pk=post.pk %}"><i class="fas fa-pencil-alt"></i></a>
                <a class="btn btn-default" href="{% url 'website:post_remove' pk=post.pk %}"><i class="far fa-trash-alt"></i></a>
                <a class="btn btn-default" href="{% url 'website:post_publish' pk=post.pk %}">Publish</a>


            {% elif post.status == "Published" and post.privacy == "Private"%}

                <a class="btn btn-default" href="{% url 'website:post_edit' pk=post.pk %}"><i class="fas fa-pencil-alt"></i></a>
                <a class="btn btn-default" href="{% url 'website:post_remove' pk=post.pk %}"><i class="far fa-trash-alt"></i></a>
                <a class="btn btn-default" href="{% url 'website:post_share' pk=post.pk %}">Share</a>


            {% else %}

                <a class="btn btn-default" href="{% url 'website:post_edit' pk=post.pk %}"><i class="fas fa-pencil-alt"></i></a>
                <a class="btn btn-default" href="{% url 'website:post_remove' pk=post.pk %}"><i class="far fa-trash-alt"></i></a>

            {% endif %}
        </form>

        {% endif %}

            <div class="post-title">
                <h3>{{ post.title }}</h3>
            </div>
            <div class="post-info">
                <p><i class="far fa-clock"></i> Updated on {{ post.updated | date:"d F Y" }}.
            </div>

            <div class="post-tags">
                <ul class="tags">
                    {% for tag in post.tags.all %}
                        <li class="single-tag">
                            <a class="btn btn-light tag" href="{% url 'website:tagged_posts_list' tag.id %}">{{ tag.slug }}</a>
                        </li>
                    {% endfor %}
                </ul>
            </div>

            <div class="post-text">
                <p>{{ post.content | safe }}</p>
            </div>

            <div class="author-info">
                <h2 class="author-heading">Published by</h2>
                <div class="author-avatar">
                    {% if user.profile.avatar %}
		                <img src="{{ post.author.profile.avatar.url }}" width="100" height="100" alt="Profile Avatar"
                             class="avatar photo">
                    {% else %}
                        <img src="/static/crazycat.jpeg"
                             width="200" height="200" alt="Profile Avatar"
                             class="avatar photo">
                    {% endif %}
                </div>


                <div class="author-description">
		            <h3 class="author-title left">{{ post.author.first_name }}</h3>
		            <p class="author-bio">{{ post.author.profile.bio }}</p> <!--profile-bio-->
                    <a class="author-link" href="{% url 'website:individual_author_public_posts' post.author_id %}">
				        View all posts by {{ post.author.username }}</a>
	            </div>
            </div>

        </div>

    </div>

{% endblock %}
